#!/usr/bin/env ruby
require 'gli'
require 'optparse'
require 'db_backup'
include GLI::App

program_desc 'back up databases'

version DbBackup::VERSION
options={}

option_parser = OptionParser.new do |opts|
  opts.on("-t", "--test") do
    options[:test] = true
  end
  opts.on("-i", "--iteration") do
    options[:iteration] = true
  end
  opts.on("-u USER") do |user|
    options[:user] = user
  end
  opts.on("-p PASSWORD") do |password|
    options[:password] = password
  end

end
option_parser.parse!

if options[:test] 
  STDOUT.puts("---username=#{options[:user]}")
  STDOUT.puts("---password=#{options[:password]}")
end
auth = ""
auth += "-u#{options[:user]}" if options[:user]
auth += "-u#{options[:password]}" if options[:password]

run(ARGV)
